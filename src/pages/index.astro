---
import { listProducts } from "@api/product/listProducts";
import Footer from "@components/Footer.astro";
import HeroSection from "@section/HeroSection.astro";
import Navbar from "@components/Navbar.astro";
import Layout from "@layouts/Layout.astro";
import ShortIntroSection from "@section/ShortIntroSection.astro";
import PartnerCompanies from "@section/PartnerCompanies.astro";
import { pageTitleDesc } from "content";
import ProductCards from "@components/ProductCards";
import CollectionGroup from "@components/CollectionGroup";
import { collectionList } from "@api/product/collectionList";

const { collections } = await collectionList({ limit: 3 });
const res = await listProducts({
  collection_id: [collections[0].id],
  limit: 3,
});
const product = res?.products;
---

<Layout
  title={pageTitleDesc.home.title}
  description={pageTitleDesc.home.description}
>
  <Navbar />
  <HeroSection />

  <!-- Featured section -->
  <ShortIntroSection />

  <!-- Feature Products -->
  <CollectionGroup
    title="Feature Product"
    link="/collection"
    linkText="View all collections"
  >
    <ProductCards products={product} client:load />
  </CollectionGroup>
  <!-- Partner company Logo cloud -->
  <PartnerCompanies />

  <Footer />
</Layout>
